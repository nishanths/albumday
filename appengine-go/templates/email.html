{{ define "base" }}
<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Album Birthdays: {{.Day}} {{.Month.String}}</title>
</head>
<body style="font-family: cantarell, helvetica, arial, sans-serif;padding: 10px 15px;max-width: 600px;">
	<style type="text/css">
		body {
			font-family: cantarell, helvetica, arial, sans-serif;
			padding: 10px 15px;
			max-width: 600px;
		}
		section {
			margin-bottom: 30px;
		}
		.item {
			margin-bottom: 30px;
		}
		.item .art {
			max-width: 200px;
		}
		.item .info {
			margin-top: 5px;
			line-height: 1.4rem;
		}
	</style>

	<section class="header" style="margin-bottom: 30px;">
		<h2>album birthdays</h2>
		<a href="{{.AppVisitURL}}">{{.AppVisitURL}}</a>
	</section>

	<section class="main" style="margin-bottom: 30px;">
		{{ range .BirthdayItems }}
		{{ template "item" . }}
		{{ end }}
	</section>

	<section class="footer" style="margin-bottom: 30px;">
		<a href="{{.UnsubURL}}">Unsubscribe</a>
	</section>
</body>
</html>
{{ end }}


{{ define "item" }}
<div class="item" style="margin-bottom: 30px;">
	{{ if .Link }}
	<a href="{{.Link}}">
		<img class="art" src="{{.ArtworkURL}}" style="max-width: 200px;">
	</a>
	{{ else }}
	<img class="art" src="{{.ArtworkURL}}" style="max-width: 200px;">
	{{ end }}
	<div class="info" style="margin-top: 5px;line-height: 1.4rem;">
		<div>
			{{ if .Link }}
			<a href="{{.Link}}">
				<span class="album">{{.Album.Album}}</span>
			</a>
			{{ else }}
			<span class="album">{{.Album.Album}}</span>
			{{ end }}
		</div>
		<div>
			<span class="artist">{{.Artist}}, </span>
			<span class="year">{{.Release.Year}}</span>
		</div>
		<div>
			<span>Songs:&nbsp;</span>
			{{ $songs := .Songs }}
			{{ if gt (len .Songs) 5 }}
			{{ $songs = slice .Songs 0 5 }}
			{{ end }}

			{{ range $i, $song := $songs }}
			{{ if $song.Link }}
			<a href="{{$song.Link}}"><span class="song">{{$song.Title}}</span></a>{{ if ne $i (add (len $songs) -1) }}<span>, </span>{{ end }}
			{{ else }}
			<span class="song">{{$song.Title}}</span>{{ if ne $i (add (len $songs) -1) }}<span>, </span>{{ end }}
			{{ end }}
			{{ end }}
		</div>
	</div>
</div>
{{ end }}
